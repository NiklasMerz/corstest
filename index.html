<head>
    <title>CORS TEST</title>
</head>

<body>

    <h2>Check network tab of developer tools for cookies in requests.</h2>
    <p>The buttons do a http request to an API that returns a cookie. 
        The first one should get the cookie and the second one should sent the cookie</p>

    <h2>CORS requests to https://cors-test.appspot.com/test with cookie test=test</h2>
    <button id="fetch" onclick="fetchBtn('https://cors-test.appspot.com/test')">fetch</button>
    <br/><br/>
    <button id="xhr" onclick="xhrBtn('https://cors-test.appspot.com/test')">XMLHttpRequest</button>

    <h2>Same origin request to https://niklas.merz.dev/corstest/ with cookie corstest=corstest</h2>
    <button id="fetch" onclick="fetchBtn('https://niklas.merz.dev/corstest/')">fetch</button>
    <br /><br />
    <button id="xhr" onclick="xhrBtn('https://niklas.merz.dev/corstest/')">XMLHttpRequest</button>

</body>

<script>

    function fetchBtn(url) {
        fetch(url, {credentials: "include", method: "GET", mode: "cors"})
        .then((res) => console.log("Check network tab for cookies in requests", res));
    }

    function xhrBtn(url) {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', url, true);
        xhr.withCredentials = true;
        xhr.send(null);
    }

</script>