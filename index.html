<head>
    <title>CORS TEST</title>
</head>

<body>

    <h3>Check network tab of developer tools.</h3>
    <p>This pages does two subsequent requests to the cors-test API. <br/>
    The first one should recieve a cookie that should be sent on the second one.</p>

    <button id="fetch" onclick="fetchBtn()">fetch</button>

    <br/><br/>

    <button id="xhr" onclick="xhrBtn()">XMLHttpRequest</button>

</body>

<script>

    function fetchBtn() {
        fetch("https://cors-test.appspot.com/test", {credentials: "include", method: "POST"})
        .then(fetch("https://cors-test.appspot.com/test", {credentials: "include", method: "POST"}))
        .then((res) => console.log("Check network tab for cookies in requests", res));
    }

    function xhrBtn() {
        var xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://cors-test.appspot.com/test', true);
        xhr.withCredentials = true;
        xhr.send(null);

        xhr = new XMLHttpRequest();
        xhr.open('POST', 'https://cors-test.appspot.com/test', true);
        xhr.withCredentials = true;
        xhr.send(null);
    }

</script>